<style>
  /* styles go here */
  .hidden {
    display: none;
  }  
  body:not(.scrolled) img.logodark {
    filter: brightness(0) saturate(100%) invert(57%) sepia(5%) saturate(305%) hue-rotate(169deg) brightness(91%) contrast(84%);
  }

  @media (max-width: 767px) {
    #footer-left {
      display: none;
    }
  }
  
</style>
<script>
  /*/ script code goes here */
window.addEventListener('DOMContentLoaded', () => {

    const url = new URL(window.location.href);
    
    if (url.pathname === "/" || url.pathname === "/home" || window.location.pathname === "/en" || window.location.pathname === "/ja") {
        document.body.classList.add("first-page");
    }

    window.addEventListener("scroll", function() {
        if (window.scrollY > 50) {
            document.body.classList.add("scrolled");
        } else {
            document.body.classList.remove("scrolled");
        }
    });
  
const html = document.documentElement;
const footer = document.querySelector('footer');

if (html.classList.contains('translated') && footer) {
  // Inject Material Symbols font if not already present
  if (!document.getElementById('material-symbols-style')) {
    const link = document.createElement('link');
    link.id = 'material-symbols-style';
    link.href = 'https://fonts.googleapis.com/css2?family=Material+Symbols+Outlined';
    link.rel = 'stylesheet';
    document.head.appendChild(link);
  }

  // Hide the first <section> inside the footer
  const firstSection = footer.querySelector('section');
  if (firstSection) {
    firstSection.style.display = 'none';
  }

  // Create the right note with icon
  const rightNote = document.createElement('div');
  rightNote.id = 'ai-translation-note';
  Object.assign(rightNote.style, {
    position: 'absolute',
    bottom: '10px',
    right: '10px',
    fontSize: '0.8em',
    backgroundColor: 'rgba(0, 0, 0, 0.05)',
    padding: '4px 8px',
    borderRadius: '4px',
    color: '#555',
    display: 'flex',
    alignItems: 'center',
    gap: '4px'
  });

  const icon = document.createElement('span');
  icon.textContent = 'translate';
  icon.className = 'material-symbols-outlined';
  icon.style.fontSize = '1em';

  const label = document.createElement('span');
  const htmlEl = document.documentElement; // selects the <html> element

  let provider = htmlEl.getAttribute('data-provider');
  if (provider && provider.trim() !== '') {
      // get friendly name
      switch (provider) {
        case 'DEEPL':
          provider = 'DeepL';
          break;
        case 'AZURE':
          provider = 'Azure';
          break;
      }
      console.log(`Translated by ${provider}`);
      label.textContent = `Translated from English by ${provider} AI`
  } else {
      label.textContent = 'This content was AI translated.';
  }

  rightNote.appendChild(icon);
  rightNote.appendChild(label);

  // Create the left note
  const leftNote = document.createElement('div');
  leftNote.id = 'footer-left';
  leftNote.textContent = 'netlands.tokyo.jp';
  Object.assign(leftNote.style, {
    position: 'absolute',
    bottom: '25px',
    left: '60px',
    fontSize: '14px',
    color: '#555'
  });

  // Ensure footer has relative positioning
  footer.style.position = 'relative';
  footer.appendChild(rightNote);
  footer.appendChild(leftNote);
}

  
  /* const regex = /%([^\s%]+)%/g;
  const skipTags = new Set(['SCRIPT', 'STYLE', 'NOSCRIPT', 'TEXTAREA', 'INPUT', 'SELECT']);

  function wrapMatches(node) {
    if (node.nodeType === Node.TEXT_NODE && node.parentNode && !skipTags.has(node.parentNode.nodeName)) {
      const text = node.textContent;
      if (!regex.test(text)) return;

      const frag = document.createDocumentFragment();
      let lastIndex = 0;
      text.replace(regex, (match, p1, offset) => {
        frag.append(text.slice(lastIndex, offset));
        const span = document.createElement('span');
        span.className = 'hidden';
        span.textContent = `%${p1}%`;
        frag.append(span);
        lastIndex = offset + match.length;
      });
      frag.append(text.slice(lastIndex));
      node.parentNode.replaceChild(frag, node);
    } else if (node.nodeType === Node.ELEMENT_NODE && !skipTags.has(node.nodeName)) {
      node.childNodes.forEach(wrapMatches);
    }
  }

  wrapMatches(document.body);*/
  
function getVisibleTextContent(root = document.body) {
  const skipTags = new Set(['SCRIPT', 'STYLE', 'NOSCRIPT', 'TEMPLATE']);
  let text = '';

  function walk(node) {
    if (skipTags.has(node.nodeName)) return;

    if (node.nodeType === Node.TEXT_NODE) {
      text += node.textContent;
    } else if (node.nodeType === Node.ELEMENT_NODE) {
      for (const child of node.childNodes) {
        walk(child);
      }
    }
  }

  walk(root);
  return text;
}

if (getVisibleTextContent().includes('%logodark%')) {
    document.querySelectorAll('header a[href="/home"] img').forEach((img, i) => {
      console.log(`Image ${i}:`, img.className);
      img.classList.add('logodark'); // this is safe even if the class is already present
    });
  }
 
});
  
</script>
