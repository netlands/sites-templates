<footer id="site-footer">
  <div class="footer-content">
          <div class="footer-left">
            <span class="placeholder copyright-symbol">&copy; 2025</span> <span class="sitename">netlands</span> · <span class="placeholder copyright-text style-editor">All rights reserved.</span>
          </div>
          <div class="footer-right">
            <div class="container">      
             <a href="https://www.netlands.com" class="made-with-magic" style="display:flex"><span class="magic-icon"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor"><path d="M10.6144 17.7956 11.492 15.7854C12.2731 13.9966 13.6789 12.5726 15.4325 11.7942L17.8482 10.7219C18.6162 10.381 18.6162 9.26368 17.8482 8.92277L15.5079 7.88394C13.7092 7.08552 12.2782 5.60881 11.5105 3.75894L10.6215 1.61673C10.2916.821765 9.19319.821767 8.8633 1.61673L7.97427 3.75892C7.20657 5.60881 5.77553 7.08552 3.97685 7.88394L1.63658 8.92277C.868537 9.26368.868536 10.381 1.63658 10.7219L4.0523 11.7942C5.80589 12.5726 7.21171 13.9966 7.99275 15.7854L8.8704 17.7956C9.20776 18.5682 10.277 18.5682 10.6144 17.7956ZM19.4014 22.6899 19.6482 22.1242C20.0882 21.1156 20.8807 20.3125 21.8695 19.8732L22.6299 19.5353C23.0412 19.3526 23.0412 18.7549 22.6299 18.5722L21.9121 18.2532C20.8978 17.8026 20.0911 16.9698 19.6586 15.9269L19.4052 15.3156C19.2285 14.8896 18.6395 14.8896 18.4628 15.3156L18.2094 15.9269C17.777 16.9698 16.9703 17.8026 15.956 18.2532L15.2381 18.5722C14.8269 18.7549 14.8269 19.3526 15.2381 19.5353L15.9985 19.8732C16.9874 20.3125 17.7798 21.1156 18.2198 22.1242L18.4667 22.6899C18.6473 23.104 19.2207 23.104 19.4014 22.6899Z"></path></svg></span><span class="magic-text">Built with magic in Tokyo</span></a>
             <a href="https://www.blogger.com" class="powered-by-blogger" style="display:none"><span class="blogger-icon"><svg xmlns="http://www.w3.org/2000/svg" height="20px" viewBox="0 0 179.51975 179.20429"><path fill="#f06a35" d="M20.512413 178.49886c-3.359449-.8837-6.258272-2.1837-8.931866-4.0056-2.256922-1.5379-5.555601-4.7174-6.810077-6.5637-1.532132-2.255-3.293254-6.1168-4.010994-8.795-.732062-2.7319-.743927-3.8198-.757063-69.39501-.01306-65.24411.0018-66.67877.719335-69.48264C3.259268 10.34132 11.117019 2.7971 21.251347.54646 24.165189-.10065 154.331139-.21383 157.47424.42803c8.508999 1.73759 15.197718 6.84619 19.06824 14.56362 3.07712 6.13545 2.80203-.61622 2.94296 72.23085.0897 46.34991.007 65.80856-.28883 68.23286-1.38576 11.3442-9.210679 20.1431-20.470153 23.0183-2.880202.7354-3.882129.7459-69.275121.7259-63.227195-.019-66.474476-.052-68.938923-.7007z"/>  <path fill="none" d="M-82.99522 87.83767V-84.06232h1020v343.79998h-1020V87.83767z"/>  <path fill="#fff" d="M115.16168 144.83466c8.064748-1.1001 14.384531-4.3325 20.313328-10.3896 4.288999-4.38181 6.973811-9.12472 8.728379-15.41921.728903-2.6149.790018-3.88807.923587-19.24149.100809-11.58796.01669-17.01514-.285075-18.38528-.437344-1.98593-1.67711-3.83016-3.091687-4.59911-.435299-.23661-3.224334-.53819-6.197859-.67015-4.982681-.22115-5.540155-.31832-7.11287-1.24-2.494681-1.46198-3.181724-3.04069-3.188544-7.32677-.01304-8.1894-3.421087-15.79237-10.154891-22.65435-4.797263-4.8886-10.14889-8.19759-16.256563-10.05172-1.462167-.44388-4.736105-.59493-15.7023605-.72452-17.2069763-.20332-21.0264035.14939-26.8842785 2.48265-10.799733 4.30168-18.559563 13.36742-21.390152 24.98992-.531646 2.18295-.634845 5.6815-.760427 25.77865-.157327 25.17748.01622 28.87467 1.589422 33.86414 1.299798 4.12233 2.611223 6.64844 5.312916 10.23388 5.146805 6.83036 12.860236 11.76336 20.572006 13.15646 3.669923.6631 48.94793.829 53.585069.1965z"/>  <path fill="#f06a35" d="M67.5750093 75.71747c-4.1229413-1.13646-5.6634683-7.05179-2.6332273-10.11109 1.9367555-1.95536 2.4721802-2.02981 14.5952492-2.02981 10.8833578 0 11.2491898.0238 12.8478758.83129 2.310253 1.16711 3.314106 2.81263 3.314106 5.43252 0 2.36619-.942769 4.0244-3.045645 5.35691-1.129143.71549-1.803912.76002-12.4672419.82265-6.5844803.0387-11.829856-.0872-12.6111168-.30247zm-.5165819 39.80858c-1.7697484-.77113-3.4178244-2.91327-3.7026534-4.81263-.271319-1.80929.637963-4.29669 2.031786-5.55809 1.7569755-1.59003 2.5280723-1.64307 24.134743-1.66008 22.226353-.0174 22.11068-.0268 24.218307 1.94113 2.976827 2.77944 2.348939 7.7279-1.238363 9.75964l-3.686323.59948-19.213121.22489c-16.8830622.19762-21.6656419-.1114-22.5443756-.49433z"/></svg></span> <span class="blogger-text">Powered by Blogger</span></a>                     
            </div>      
          </div>
  </div>        
</footer>
<div id="image-overlay">
  <button id="close-overlay">✕</button>
  <div id="zoom-container">
    <img id="zoomed-image" src="" alt="Artwork" draggable="false" />
  </div>
  <div id="image-caption"></div>
  <div id="zoom-preview">Zoom: 100%</div>
</div>
<style>
  :root {
    --overlay-bg: #111;
  }

#image-caption {
  position: absolute;
  bottom: 60px;
  left: 50%;
  transform: translateX(-50%);
  background: rgba(255, 255, 255, 0.9);
  padding: 6px 12px;
  font-size: 14px;
  border-radius: 4px;
  color: #333;
  font-family: sans-serif;
  box-shadow: 0 2px 6px rgba(0,0,0,0.2);
  display: none;
  max-width: 90%;
  text-align: center;
  white-space: pre-wrap;
}

#image-overlay.show-caption #image-caption {
  display: block;
}



  #image-overlay {
    position: fixed;
    top: 0; left: 0;
    width: 100vw;
    height: 100vh;
    background-color: var(--overlay-bg);
    display: none;
    justify-content: center;
    align-items: center;
    z-index: 9999;
    overflow: hidden;
  }

  #zoom-container {
    position: relative;
    cursor: grab;
    overflow: hidden;
    width: 100%;
    height: 100%;
  }

  #zoomed-image {
    max-width: none;
    max-height: none;
    transform-origin: center center;
    user-drag: none;
    user-select: none;
    pointer-events: auto;
    position: absolute;
    top: 0;
    left: 0;
  }

#zoomed-image {
  transform-origin: top left;
}



  #close-overlay {
    position: absolute;
    top: 20px;
    right: 20px;
    background: #fff;
    border: none;
    font-size: 24px;
    padding: 5px 10px;
    cursor: pointer;
    z-index: 10000;
    border-radius: 4px;
  }

  #zoom-preview {
    position: absolute;
    bottom: 20px;
    right: 20px;
    background: rgba(255, 255, 255, 0.9);
    padding: 6px 12px;
    font-size: 14px;
    border-radius: 4px;
    color: #333;
    z-index: 10000;
    font-family: sans-serif;
    box-shadow: 0 2px 6px rgba(0,0,0,0.2);
  }

  img.view-original {
    cursor: pointer;
  }

</style>
<script>
document.addEventListener('DOMContentLoaded', () => {

  const overlay = document.getElementById('image-overlay');
  const zoomedImage = document.getElementById('zoomed-image');
  const closeBtn = document.getElementById('close-overlay');
  const zoomContainer = document.getElementById('zoom-container');
  const zoomPreview = document.getElementById('zoom-preview');

  let scale = 1;
  let originX = 0;
  let originY = 0;
  let isDragging = false;
  let startX, startY;
  let naturalWidth = 0;
  let naturalHeight = 0;
  let maxZoomScale = 2.5; // Default max zoom

function fitAndCenterImage() {
  const containerRect = zoomContainer.getBoundingClientRect();
  const containerW = containerRect.width;
  const containerH = containerRect.height;

  const imgRatio = naturalWidth / naturalHeight;
  const containerRatio = containerW / containerH;

  if (imgRatio > containerRatio) {
    scale = containerW / naturalWidth;
    originX = 0;
    originY = (containerH - naturalHeight * scale) / 2;
  } else {
    scale = containerH / naturalHeight;
    originX = (containerW - naturalWidth * scale) / 2;
    originY = 0;
  }

  applyTransform();
  zoomPreview.textContent = `Zoom: ${Math.round(scale * 100)}%`;
}

  function applyTransform() {
    zoomedImage.style.transform = `translate(${originX}px, ${originY}px) scale(${scale})`;
  }

  document.querySelectorAll('img.view-original').forEach(img => {
    img.addEventListener('click', e => {
      e.preventDefault();
      const originalSrc = img.getAttribute('data-original-src') || img.src;
      zoomedImage.src = originalSrc;
      overlay.style.display = 'flex';

      zoomedImage.onload = () => {
        naturalWidth = zoomedImage.naturalWidth;
        naturalHeight = zoomedImage.naturalHeight;

        // Set max zoom based on longest side
        const longestSide = Math.max(naturalWidth, naturalHeight);
        maxZoomScale = longestSide > 2048 ? 2.5 : 5;

        fitAndCenterImage();
      };
    });

    const caption = img.getAttribute('alt') || '';
    document.getElementById('image-caption').textContent = caption;

    // Toggle caption visibility based on CSS class
    if (img.classList.contains('show-caption')) {
      overlay.classList.add('show-caption');
    } else {
      overlay.classList.remove('show-caption');
    }


    const preloadSrc = img.getAttribute('data-original-src');
    if (preloadSrc) {
      const preload = new Image();
      preload.src = preloadSrc;
    }
  });

      const urlParams = new URLSearchParams(window.location.search);
      const view = urlParams.get("view");

      if (view === "image") {
          const originalSrc = img.getAttribute('data-original-src') || img.src;
          zoomedImage.src = originalSrc;
          overlay.style.display = 'flex';

          zoomedImage.onload = () => {
            naturalWidth = zoomedImage.naturalWidth;
            naturalHeight = zoomedImage.naturalHeight;

            // Set max zoom based on longest side
            const longestSide = Math.max(naturalWidth, naturalHeight);
            maxZoomScale = longestSide > 2048 ? 2.5 : 5;

            fitAndCenterImage();    
      }




  closeBtn.addEventListener('click', () => {
    overlay.style.display = 'none';
  });

  // Esc key to close
  window.addEventListener('keydown', e => {
    if (e.key === 'Escape') {
      overlay.style.display = 'none';
    }
  });

  // Zoom with scroll (toward cursor)
zoomContainer.addEventListener('wheel', e => {
  e.preventDefault();

  const containerRect = zoomContainer.getBoundingClientRect();
  const mouseX = e.clientX - containerRect.left;
  const mouseY = e.clientY - containerRect.top;

  const delta = e.deltaY > 0 ? -0.1 : 0.1;
  const newScale = Math.min(Math.max(scale + delta, 0.5), maxZoomScale);

  // Calculate mouse position in image space
  const imgX = (mouseX - originX) / scale;
  const imgY = (mouseY - originY) / scale;

  // Adjust origin to keep mouse position stable
  originX = mouseX - imgX * newScale;
  originY = mouseY - imgY * newScale;

  scale = newScale;
  applyTransform();
  zoomPreview.textContent = `Zoom: ${Math.round(scale * 100)}%`;
});

  // Drag to pan
  zoomContainer.addEventListener('mousedown', e => {
    isDragging = true;
    startX = e.clientX - originX;
    startY = e.clientY - originY;
    zoomContainer.style.cursor = 'grabbing';
    document.body.style.userSelect = 'none';
  });

  window.addEventListener('mouseup', () => {
    isDragging = false;
    zoomContainer.style.cursor = 'grab';
    document.body.style.userSelect = '';
  });

  window.addEventListener('mousemove', e => {
    if (!isDragging) return;
    originX = e.clientX - startX;
    originY = e.clientY - startY;
    requestAnimationFrame(applyTransform);
  });

  // Double-click to reset
zoomContainer.addEventListener('dblclick', () => {
  const containerRect = zoomContainer.getBoundingClientRect();
  const containerW = containerRect.width;
  const containerH = containerRect.height;

  const fittedScaleW = containerW / naturalWidth;
  const fittedScaleH = containerH / naturalHeight;
  const fittedScale = Math.min(fittedScaleW, fittedScaleH);

  const isFitted = Math.abs(scale - fittedScale) < 0.01;

  if (isFitted) {
    // Zoom to 100%
    scale = 1;
    originX = (containerW - naturalWidth) / 2;
    originY = (containerH - naturalHeight) / 2;
  } else {
    // Fit to window
    scale = fittedScale;
    const imgRatio = naturalWidth / naturalHeight;
    const containerRatio = containerW / containerH;

    if (imgRatio > containerRatio) {
      originX = 0;
      originY = (containerH - naturalHeight * scale) / 2;
    } else {
      originX = (containerW - naturalWidth * scale) / 2;
      originY = 0;
    }
  }

  applyTransform();
  zoomPreview.textContent = `Zoom: ${Math.round(scale * 100)}%`;
});
});
</script>